<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimal-ui">
    <link rel="canonical" href="https://www.beta.codemaster.ltd/">
    <link rel="icon" href="img/logo2.png"><!-- 32Ã—32 -->
    <link rel="icon" href="img/logo2.png" type="image/png">
    <link rel="apple-touch-icon" href="img/logo2.png"><!-- 180Ã—180 -->
    <link rel="apple-touch-icon-precomposed" href="img/logo2.png">
    <link rel="shortcut icon" href="img/logo2.png" type="image/png">
    <title>Beta Login | Code Master</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="popupAd" class="popup">
        <div class="popup-content">
            <span class="close-btn" onclick="closePopup()">&times;</span>
            <h2>Join us on Discord</h2>
            <img src="img/discord.png" alt="CodeMaster Logo">
            <p>Your ultimate destination for mastering coding. Visit us to explore what we have for you!</p>
            <button onclick="visitWebsite()">Join Now</button>
        </div>
    </div>
    <div class="login-container">
        <div class="bannerBg">
    <div class="beta-badge">
        <img style="width: 150px;" id="profile-picture" src="img/logoNeon.png" alt="Default Profile Picture">
        <br></br>
        <img style="width: 300px;" class="betaLogo" src="img/betaLogo.png" alt="Your Logo">
    </div>
</div>
        <h1 id="welcome"></h1>
        <form autocomplete="on" id="login-form" style="display: block;">
            <input type="text" id="username" placeholder="Username" tabindex="-1" spellcheck="false" required>
            <div class="password-container ">
                <input type="password" id="password" placeholder="Password" tabindex="1" spellcheck="false" required>
                <span class="toggle-password" id="toggle-password" title="Show Password">ðŸ”“</span> <!-- Eye icon -->
            </div>
            <p style="color: red; font-weight: 600;" id="text">WARNING! Caps lock is ON.</p>
            <button class="login" type="submit"></button>
            <br></br>
        </form>
        <button class="resetBtn" id="reset-password-button">Reset Password</button>
        <form id="reset-form" style="display: none;">
            <input type="text" id="reset-username" placeholder="Enter your username *" required>
            <input type="password" id="new-password" placeholder="Enter new password *" required>
            <button type="submit">Reset</button>
        </form>
        <div id="info" class="info">
            <p>Welcome to Code Master Beta.</p>
            <p>If you encounter any issues, please <a href="https://www.codemaster.ltd/pages/contact">contact us</a>.</p>
        </div>
        <footer>
            Â© <span id="footer"></span> <a href="https://www.codemaster.ltd">Code Master</a> All rights reserved.
        </footer>
        <div id="version-container">
            <span class="font-v">V</span>
            <span id="version" class="font-version"></span>
        </div>
    </div>
    <script src="script.js" type="module"></script>
    <script>
        var input = document.getElementById("password");
        var text = document.getElementById("text");

        function updateCapsLockWarning(event) {
            const key = event.key.toLowerCase();
            let isCapsLock = false;
            let isShiftHeld = event.shiftKey; // Check if Shift key is held down

            if (key >= 'a' && key <= 'z') {
                isCapsLock = (event.getModifierState && event.getModifierState('CapsLock')) ||
                             (key !== event.key.toLowerCase() && !event.shiftKey);
                
                if (isCapsLock) {
                    text.textContent = 'WARNING! Caps Lock is ON';
                } else if (isShiftHeld) {
                    text.textContent = 'WARNING! Shift key is held down';
                } else {
                    text.textContent = '';
                }

                text.style.display = text.textContent ? 'block' : 'none';
            } else {
                text.style.display = 'none';
            }
        }

        function checkInitialCapsLock() {
            text.style.display = 'none';
        }

        input.addEventListener('keydown', updateCapsLockWarning); // Use 'keydown' to detect keys as they are pressed
        input.addEventListener('keyup', updateCapsLockWarning);   // Optional: to clear the warning when keys are released

        checkInitialCapsLock();

        const showAds = false;
        const def = 1000;

        function showPopup() {
            document.getElementById('popupAd').style.display = 'flex';
        }

        function closePopup() {
            document.getElementById('popupAd').style.display = 'none';
        }

        function visitWebsite() {
            window.open('https://discord.gg/XcEHvPR9qA', '_blank');
            closePopup();
        }

        if (showAds) {
            window.onload = function() {
                setTimeout(showPopup, def);
            };
        }
    </script>

    <script type="module">
        import { config } from './config.js';

        // Perform maintenance check and handle redirection
        if (config.maintenance === 'offline' || config.maintenance === 'down') {
            console.log('Redirecting to indexMaintenance.html');
            window.location.href = 'indexMaintenance.html';  
        } else if (config.maintenance === 'online') {
            console.log('Welcome to the site.');
            // Optionally, you can also check for other conditions or perform other actions here
        }  
    </script>
</body>
</html>
